{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{GoogleMap,Marker,InfoWindow}from\"@react-google-maps/api\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const mapContainerStyle={width:\"100%\",height:\"600px\"};const center={lat:18.2362,// Puerto Rico latitude\nlng:-66.4534// Puerto Rico longitude\n};const ExperienceMap=()=>{const[markers,setMarkers]=useState([]);const[selectedMarker,setSelectedMarker]=useState(null);const[activeMarker,setActiveMarker]=useState(null);const navigate=useNavigate();const fetchExperiences=async()=>{try{const userVibes=JSON.parse(localStorage.getItem('userVibes'))||[];const response=await fetch(\"/api/experiences\");// Adjust the endpoint as needed\nconst data=await response.json();let experiences;if(userVibes.length===0){experiences=data.map(exp=>({position:{lat:exp.geolocation.coordinates[1],lng:exp.geolocation.coordinates[0]},photo:exp.pictureUrl,name:exp.name,description:exp.description,// Assuming there is a description field\nid:exp._id}));}else{// Filter experiences based on userVibes\nexperiences=data.filter(exp=>{// Assuming each experience has a `vibes` array\nreturn exp.vibes.some(vibe=>userVibes.includes(vibe));}).map(exp=>({position:{lat:exp.geolocation.coordinates[1],lng:exp.geolocation.coordinates[0]},photo:exp.pictureUrl,name:exp.name,description:exp.description,// Assuming there is a description field\nid:exp._id}));}setMarkers(experiences);}catch(error){console.error(\"Error fetching experiences:\",error);}};useEffect(()=>{fetchExperiences();},[]);const handleMarkerClick=marker=>{setSelectedMarker(marker);};const handleMouseOver=index=>{setActiveMarker(index);};const handleMouseOut=()=>{setActiveMarker(null);};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(GoogleMap,{mapContainerStyle:mapContainerStyle,center:center,zoom:10,className:\"map\",children:[markers.map((marker,index)=>/*#__PURE__*/_jsx(Marker,{position:marker.position,title:marker.name,onClick:()=>handleMarkerClick(marker),onMouseOver:()=>handleMouseOver(index),onMouseOut:handleMouseOut,icon:{scaledSize:new window.google.maps.Size(activeMarker===index?50:40,activeMarker===index?50:40)}},index)),selectedMarker&&/*#__PURE__*/_jsx(InfoWindow,{position:selectedMarker.position,onCloseClick:()=>setSelectedMarker(null),children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:selectedMarker.name}),/*#__PURE__*/_jsx(\"p\",{children:selectedMarker.description}),/*#__PURE__*/_jsx(\"img\",{src:selectedMarker.photo,alt:selectedMarker.name}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/experience/\".concat(selectedMarker.id)),children:\"View Details\"})]})})]})});};export default ExperienceMap;","map":{"version":3,"names":["React","useState","useEffect","GoogleMap","Marker","InfoWindow","useNavigate","jsx","_jsx","jsxs","_jsxs","mapContainerStyle","width","height","center","lat","lng","ExperienceMap","markers","setMarkers","selectedMarker","setSelectedMarker","activeMarker","setActiveMarker","navigate","fetchExperiences","userVibes","JSON","parse","localStorage","getItem","response","fetch","data","json","experiences","length","map","exp","position","geolocation","coordinates","photo","pictureUrl","name","description","id","_id","filter","vibes","some","vibe","includes","error","console","handleMarkerClick","marker","handleMouseOver","index","handleMouseOut","children","zoom","className","title","onClick","onMouseOver","onMouseOut","icon","scaledSize","window","google","maps","Size","onCloseClick","src","alt","concat"],"sources":["/home/bradley/projects/TravelVibesPR/src/pages/ExperienceMap.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { GoogleMap, Marker, InfoWindow } from \"@react-google-maps/api\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst mapContainerStyle = {\n  width: \"100%\",\n  height: \"600px\",\n};\n\nconst center = {\n  lat: 18.2362, // Puerto Rico latitude\n  lng: -66.4534, // Puerto Rico longitude\n};\n\nconst ExperienceMap = () => {\n  const [markers, setMarkers] = useState([]);\n  const [selectedMarker, setSelectedMarker] = useState(null);\n  const [activeMarker, setActiveMarker] = useState(null);\n  const navigate = useNavigate();\n\n  const fetchExperiences = async () => {\n    try {\n      const userVibes = JSON.parse(localStorage.getItem('userVibes')) || [];\n\n      const response = await fetch(\"/api/experiences\"); // Adjust the endpoint as needed\n      const data = await response.json();\n\n      let experiences;\n      if (userVibes.length === 0) {\n        experiences = data.map((exp) => ({\n          position: { lat: exp.geolocation.coordinates[1], lng: exp.geolocation.coordinates[0] },\n          photo: exp.pictureUrl,\n          name: exp.name,\n          description: exp.description, // Assuming there is a description field\n          id: exp._id,\n        }));\n      } else {\n        // Filter experiences based on userVibes\n        experiences = data.filter(exp => {\n          // Assuming each experience has a `vibes` array\n          return exp.vibes.some(vibe => userVibes.includes(vibe));\n        }).map((exp) => ({\n          position: { lat: exp.geolocation.coordinates[1], lng: exp.geolocation.coordinates[0] },\n          photo: exp.pictureUrl,\n          name: exp.name,\n          description: exp.description, // Assuming there is a description field\n          id: exp._id,\n        }));\n      }\n\n      setMarkers(experiences);\n    } catch (error) {\n      console.error(\"Error fetching experiences:\", error);\n    }\n  };\n\nuseEffect(() => {\n  fetchExperiences();\n}, []);\n\n\n  const handleMarkerClick = (marker) => {\n    setSelectedMarker(marker);\n  };\n\n  const handleMouseOver = (index) => {\n    setActiveMarker(index);\n  };\n\n  const handleMouseOut = () => {\n    setActiveMarker(null);\n  };\n\n  return (\n    <div>\n      <GoogleMap mapContainerStyle={mapContainerStyle} center={center} zoom={10} className=\"map\">\n        {markers.map((marker, index) => (\n          <Marker\n            key={index}\n            position={marker.position}\n            title={marker.name}\n            onClick={() => handleMarkerClick(marker)}\n            onMouseOver={() => handleMouseOver(index)}\n            onMouseOut={handleMouseOut}\n            icon={{\n              scaledSize: new window.google.maps.Size(\n                activeMarker === index ? 50 : 40,\n                activeMarker === index ? 50 : 40\n              ),\n            }}\n          />\n        ))}\n        {selectedMarker && (\n          <InfoWindow\n            position={selectedMarker.position}\n            onCloseClick={() => setSelectedMarker(null)}\n          >\n            <div>\n              <h2>{selectedMarker.name}</h2>\n              <p>{selectedMarker.description}</p>\n              <img\n                src={selectedMarker.photo}\n                alt={selectedMarker.name}\n              />\n              <button\n                onClick={() => navigate(`/experience/${selectedMarker.id}`)}\n              >\n                View Details\n              </button>\n            </div>\n          </InfoWindow>\n        )}\n      </GoogleMap>\n    </div>\n  );\n};\n\nexport default ExperienceMap;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}