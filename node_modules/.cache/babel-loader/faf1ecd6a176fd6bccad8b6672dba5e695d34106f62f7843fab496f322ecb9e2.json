{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import{useExperienceContext}from\"../hooks/useExperienceContext\";import{useAuthContext}from\"../hooks/useAuthContext\";import'../styles/ExperienceDetails.css';// function to change a vibe from an object to its name value from the vibes collection\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const getVibeNames=async vibeIds=>{try{const response=await fetch('/api/vibes/batch',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({vibeIds})});if(!response.ok){throw new Error('Network response was not ok');}const vibeNames=await response.json();return vibeNames||['Unknown Vibe'];}catch(error){console.error('Failed to fetch vibes:',error);return['Unknown Vibe'];}};const ExperienceDetails=_ref=>{let{experience,vibes,onDelete}=_ref;const{dispatch}=useExperienceContext();const{user}=useAuthContext();const[vibeNames,setVibeNames]=useState([]);useEffect(()=>{const fetchVibeNames=async()=>{const names=await getVibeNames(vibes);setVibeNames(names);};fetchVibeNames();},[vibes]);const handleClick=async e=>{e.preventDefault();if(!user){return;}const response=await fetch('/api/experiences/'+experience._id,{method:'DELETE',headers:{'Authorization':\"Bearer \".concat(user.token)}});if(response.ok){const json=await response.json();dispatch({type:'DELETE_EXPERIENCE',payload:json});onDelete();}};const municipalities=['Adjuntas','Aguada','Aguadilla','Aguas Buenas','Aibonito','Añasco','Arecibo','Arroyo','Barceloneta','Barranquitas','Bayamón','Cabo Rojo','Caguas','Camuy','Canóvanas','Carolina','Cataño','Cayey','Ceiba','Ciales','Cidra','Coamo','Comerío','Corozal','Culebra','Dorado','Fajardo','Florida','Guánica','Guayama','Guayanilla','Guaynabo','Gurabo','Hatillo','Hormigueros','Humacao','Isabela','Jayuya','Juana Díaz','Juncos','Lajas','Lares','Las Marías','Las Piedras','Loíza','Luquillo','Manatí','Maricao','Maunabo','Mayagüez','Moca','Morovis','Naguabo','Naranjito','Orocovis','Patillas','Peñuelas','Ponce','Quebradillas','Rincón','Río Grande','Sabana Grande','Salinas','San Germán','San Juan','San Lorenzo','San Sebastián','Santa Isabel','Toa Alta','Toa Baja','Trujillo Alto','Utuado','Vega Alta','Vega Baja','Vieques','Villalba','Yabucoa','Yauco'];const municipality=municipalities.find(municipality=>experience.location.includes(municipality));return/*#__PURE__*/_jsx(Link,{to:\"/experience/\".concat(experience._id),className:\"experience-link\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"experience-item\",children:[/*#__PURE__*/_jsx(\"h4\",{children:experience.name}),/*#__PURE__*/_jsx(\"img\",{src:experience.pictureUrl,alt:experience.name,className:\"experience-image\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"experience-details\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Location: \"}),municipality||experience.location]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Vibes: \"}),/*#__PURE__*/_jsx(\"div\",{className:\"vibes\",children:vibeNames.join(' | ')})]})]})]})});};export default ExperienceDetails;","map":{"version":3,"names":["React","useEffect","useState","Link","useExperienceContext","useAuthContext","jsx","_jsx","jsxs","_jsxs","getVibeNames","vibeIds","response","fetch","method","headers","body","JSON","stringify","ok","Error","vibeNames","json","error","console","ExperienceDetails","_ref","experience","vibes","onDelete","dispatch","user","setVibeNames","fetchVibeNames","names","handleClick","e","preventDefault","_id","concat","token","type","payload","municipalities","municipality","find","location","includes","to","className","children","name","src","pictureUrl","alt","join"],"sources":["/home/bradley/projects/TravelVibesPR/src/components/experienceDetails.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useExperienceContext } from \"../hooks/useExperienceContext\";\nimport { useAuthContext } from \"../hooks/useAuthContext\";\nimport '../styles/ExperienceDetails.css';\n\n// function to change a vibe from an object to its name value from the vibes collection\nconst getVibeNames = async (vibeIds) => {\n    try {\n        const response = await fetch('/api/vibes/batch', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({ vibeIds }),\n        });\n        if (!response.ok) {\n            throw new Error('Network response was not ok');\n        }\n        const vibeNames = await response.json();\n        return vibeNames || ['Unknown Vibe'];\n    } catch (error) {\n        console.error('Failed to fetch vibes:', error);\n        return ['Unknown Vibe'];\n    }\n};\n\nconst ExperienceDetails = ({ experience, vibes, onDelete }) => {\n    const { dispatch } = useExperienceContext();\n    const { user } = useAuthContext();\n    const [vibeNames, setVibeNames] = useState([]);\n\n    useEffect(() => {\n        const fetchVibeNames = async () => {\n            const names = await getVibeNames(vibes);\n            setVibeNames(names);\n        };\n\n        fetchVibeNames();\n    }, [vibes]);\n\n    const handleClick = async (e) => {\n        e.preventDefault();\n        if (!user) {\n            return;\n        }\n\n        const response = await fetch('/api/experiences/' + experience._id, {\n            method: 'DELETE',\n            headers: {\n                'Authorization': `Bearer ${user.token}`,\n            },\n        });\n\n        if (response.ok) {\n            const json = await response.json();\n            dispatch({ type: 'DELETE_EXPERIENCE', payload: json });\n            onDelete();\n        }\n    };\n\n    const municipalities = [\n        'Adjuntas', 'Aguada', 'Aguadilla', 'Aguas Buenas', 'Aibonito', 'Añasco', 'Arecibo',\n        'Arroyo', 'Barceloneta', 'Barranquitas', 'Bayamón', 'Cabo Rojo', 'Caguas', 'Camuy',\n        'Canóvanas', 'Carolina', 'Cataño', 'Cayey', 'Ceiba', 'Ciales', 'Cidra', 'Coamo',\n        'Comerío', 'Corozal', 'Culebra', 'Dorado', 'Fajardo', 'Florida', 'Guánica', 'Guayama',\n        'Guayanilla', 'Guaynabo', 'Gurabo', 'Hatillo', 'Hormigueros', 'Humacao', 'Isabela',\n        'Jayuya', 'Juana Díaz', 'Juncos', 'Lajas', 'Lares', 'Las Marías', 'Las Piedras',\n        'Loíza', 'Luquillo', 'Manatí', 'Maricao', 'Maunabo', 'Mayagüez', 'Moca', 'Morovis',\n        'Naguabo', 'Naranjito', 'Orocovis', 'Patillas', 'Peñuelas', 'Ponce', 'Quebradillas',\n        'Rincón', 'Río Grande', 'Sabana Grande', 'Salinas', 'San Germán', 'San Juan', 'San Lorenzo',\n        'San Sebastián', 'Santa Isabel', 'Toa Alta', 'Toa Baja', 'Trujillo Alto', 'Utuado', 'Vega Alta',\n        'Vega Baja', 'Vieques', 'Villalba', 'Yabucoa', 'Yauco',\n    ];\n\n    const municipality = municipalities.find(municipality => experience.location.includes(municipality));\n\n    return (\n        <Link to={`/experience/${experience._id}`} className=\"experience-link\">\n            <div className=\"experience-item\">\n                <h4>{experience.name}</h4>\n                <img src={experience.pictureUrl} alt={experience.name} className=\"experience-image\" />\n                <div className=\"experience-details\">\n                    <div><strong>Location: </strong>{municipality || experience.location}</div>\n                    <div>\n                        <strong>Vibes: </strong>\n                        <div className=\"vibes\">{vibeNames.join(' | ')}</div>\n                    </div>\n                </div>\n            </div>\n        </Link>\n    );\n};\n\nexport default ExperienceDetails;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}