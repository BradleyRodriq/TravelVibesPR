{"ast":null,"code":"var _jsxFileName = \"/home/bradley/projects/TravelVibesPR/src/pages/UserVibes.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext, useCallback, useMemo } from 'react';\nimport { AuthContext } from '../context/authContext'; // Update the path to your AuthContext\nimport { Link } from 'react-router-dom';\nimport '../styles/UserVibes.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserVibes = () => {\n  _s();\n  const [userVibes, setUserVibes] = useState([]);\n  const [availableVibes, setAvailableVibes] = useState({});\n  const [selectedVibesToAdd, setSelectedVibesToAdd] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const {\n    user\n  } = useContext(AuthContext); // Access user from the AuthContext\n\n  const fetchUserVibes = useCallback(async () => {\n    if (!user) return; // Return early if user is null\n\n    try {\n      console.log('Fetching user vibes');\n      const response = await fetch(`/api/user/vibes`, {\n        headers: {\n          'Authorization': `Bearer ${user.token}`\n        }\n      });\n      if (!response.ok) {\n        throw new Error('Failed to fetch user vibes');\n      }\n      const data = await response.json();\n      setUserVibes(data.vibes); // Assuming the response contains a 'vibes' array\n\n      const vibeIds = data.vibes.map(vibe => vibe._id);\n      localStorage.setItem('userVibes', JSON.stringify(vibeIds));\n    } catch (error) {\n      console.error('Error fetching user vibes:', error);\n      setUserVibes([]); // Set userVibes to empty array on error\n    }\n  }, [user]);\n  const fetchAvailableVibes = useCallback(async () => {\n    try {\n      console.log('Fetching available vibes');\n      const response = await fetch('/api/vibes');\n      if (!response.ok) {\n        throw new Error('Failed to fetch available vibes');\n      }\n      const data = await response.json();\n      // Convert the array of vibes into a dictionary for quick lookup\n      const vibesDict = data.reduce((acc, vibe) => {\n        acc[vibe._id] = vibe.name;\n        return acc;\n      }, {});\n      setAvailableVibes(vibesDict);\n    } catch (error) {\n      console.error('Error fetching available vibes:', error);\n      setAvailableVibes({}); // Set availableVibes to empty dictionary on error\n    }\n  }, []);\n  useEffect(() => {\n    const fetchData = async () => {\n      setLoading(true);\n      if (user) {\n        await Promise.all([fetchUserVibes(), fetchAvailableVibes()]);\n      }\n      setLoading(false);\n    };\n    fetchData();\n  }, [user, fetchUserVibes, fetchAvailableVibes]);\n  const handleVibeSelection = vibeId => {\n    const storedVibes = JSON.parse(localStorage.getItem('userVibes')) || [];\n    if (storedVibes.includes(vibeId) || selectedVibesToAdd.includes(vibeId)) {\n      return;\n    }\n    setSelectedVibesToAdd([...selectedVibesToAdd, vibeId]);\n  };\n  const handleDeleteVibe = async vibeId => {\n    const token = user.token;\n\n    // Optimistically update the UI\n    const updatedVibes = userVibes.filter(vibe => vibe._id !== vibeId);\n    setUserVibes(updatedVibes);\n    try {\n      const response = await fetch(`/api/user/deleteVibe/${vibeId}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Failed response from server.');\n      }\n      console.log('Vibe deleted successfully!');\n      fetchUserVibes(); // Refresh user vibes\n\n      const vibeIds = updatedVibes.map(vibe => vibe._id);\n      localStorage.setItem('userVibes', JSON.stringify(vibeIds));\n    } catch (error) {\n      console.error('Error deleting vibe:', error);\n      // Revert the optimistic update in case of error\n      fetchUserVibes();\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const token = user.token;\n    console.log('Selected Vibes:', selectedVibesToAdd);\n\n    // Optimistically update the UI\n    const newVibes = [...userVibes, ...selectedVibesToAdd.map(vibeId => ({\n      _id: vibeId\n    }))];\n    setUserVibes(newVibes);\n    setSelectedVibesToAdd([]);\n    try {\n      const response = await fetch('/api/user/addVibes', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          vibes: selectedVibesToAdd\n        })\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Failed response from server.');\n      }\n      const updatedUser = await response.json();\n      console.log('Updated User:', updatedUser);\n      setUserVibes(updatedUser.vibes); // Update userVibes with the server response\n\n      console.log('Vibes added successfully!');\n      const vibeIds = updatedUser.vibes.map(vibe => vibe._id);\n      localStorage.setItem('userVibes', JSON.stringify(vibeIds));\n    } catch (error) {\n      console.error('Error adding vibes:', error);\n      // Revert the optimistic update in case of error\n      fetchUserVibes();\n    }\n  };\n  const knownUserVibes = useMemo(() => {\n    return userVibes.filter(vibe => availableVibes[vibe._id]);\n  }, [userVibes, availableVibes]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"user-vibes-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Current Vibes\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: knownUserVibes.map(vibe => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [availableVibes[vibe._id], /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleDeleteVibe(vibe._id),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 25\n        }, this)]\n      }, vibe._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Choose Vibes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"available-vibes-container\",\n        children: Object.entries(availableVibes).map(([vibeId, vibeName]) => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `vibe-button ${selectedVibesToAdd.includes(vibeId) ? 'selected' : ''}`,\n          onClick: () => handleVibeSelection(vibeId),\n          children: vibeName\n        }, vibeId, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        children: \"Click here to check out your matching experiences!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 161,\n    columnNumber: 9\n  }, this);\n};\n_s(UserVibes, \"6sgKEm5UWhiazCzuvYW2mSvMaEA=\");\n_c = UserVibes;\nexport default UserVibes;\nvar _c;\n$RefreshReg$(_c, \"UserVibes\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useCallback","useMemo","AuthContext","Link","jsxDEV","_jsxDEV","UserVibes","_s","userVibes","setUserVibes","availableVibes","setAvailableVibes","selectedVibesToAdd","setSelectedVibesToAdd","loading","setLoading","user","fetchUserVibes","console","log","response","fetch","headers","token","ok","Error","data","json","vibes","vibeIds","map","vibe","_id","localStorage","setItem","JSON","stringify","error","fetchAvailableVibes","vibesDict","reduce","acc","name","fetchData","Promise","all","handleVibeSelection","vibeId","storedVibes","parse","getItem","includes","handleDeleteVibe","updatedVibes","filter","method","errorData","handleSubmit","e","preventDefault","newVibes","body","updatedUser","knownUserVibes","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onClick","onSubmit","Object","entries","vibeName","to","_c","$RefreshReg$"],"sources":["/home/bradley/projects/TravelVibesPR/src/pages/UserVibes.js"],"sourcesContent":["import React, { useState, useEffect, useContext, useCallback, useMemo } from 'react';\nimport { AuthContext } from '../context/authContext'; // Update the path to your AuthContext\nimport { Link } from 'react-router-dom';\nimport '../styles/UserVibes.css';\n\nconst UserVibes = () => {\n    const [userVibes, setUserVibes] = useState([]);\n    const [availableVibes, setAvailableVibes] = useState({});\n    const [selectedVibesToAdd, setSelectedVibesToAdd] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const { user } = useContext(AuthContext); // Access user from the AuthContext\n\n    const fetchUserVibes = useCallback(async () => {\n        if (!user) return; // Return early if user is null\n\n        try {\n            console.log('Fetching user vibes');\n            const response = await fetch(`/api/user/vibes`, {\n                headers: {\n                    'Authorization': `Bearer ${user.token}`\n                }\n            });\n\n            if (!response.ok) {\n                throw new Error('Failed to fetch user vibes');\n            }\n\n            const data = await response.json();\n            setUserVibes(data.vibes); // Assuming the response contains a 'vibes' array\n\n            const vibeIds = data.vibes.map(vibe => vibe._id);\n            localStorage.setItem('userVibes', JSON.stringify(vibeIds));\n        } catch (error) {\n            console.error('Error fetching user vibes:', error);\n            setUserVibes([]); // Set userVibes to empty array on error\n        }\n    }, [user]);\n\n    const fetchAvailableVibes = useCallback(async () => {\n        try {\n            console.log('Fetching available vibes');\n            const response = await fetch('/api/vibes');\n            if (!response.ok) {\n                throw new Error('Failed to fetch available vibes');\n            }\n            const data = await response.json();\n            // Convert the array of vibes into a dictionary for quick lookup\n            const vibesDict = data.reduce((acc, vibe) => {\n                acc[vibe._id] = vibe.name;\n                return acc;\n            }, {});\n            setAvailableVibes(vibesDict);\n        } catch (error) {\n            console.error('Error fetching available vibes:', error);\n            setAvailableVibes({}); // Set availableVibes to empty dictionary on error\n        }\n    }, []);\n\n    useEffect(() => {\n        const fetchData = async () => {\n            setLoading(true);\n            if (user) {\n                await Promise.all([fetchUserVibes(), fetchAvailableVibes()]);\n            }\n            setLoading(false);\n        };\n        fetchData();\n    }, [user, fetchUserVibes, fetchAvailableVibes]);\n\n    const handleVibeSelection = (vibeId) => {\n        const storedVibes = JSON.parse(localStorage.getItem('userVibes')) || [];\n        if (storedVibes.includes(vibeId) || selectedVibesToAdd.includes(vibeId)) {\n            return;\n        }\n        setSelectedVibesToAdd([...selectedVibesToAdd, vibeId]);\n    };\n\n    const handleDeleteVibe = async (vibeId) => {\n        const token = user.token;\n\n        // Optimistically update the UI\n        const updatedVibes = userVibes.filter(vibe => vibe._id !== vibeId);\n        setUserVibes(updatedVibes);\n\n        try {\n            const response = await fetch(`/api/user/deleteVibe/${vibeId}`, {\n                method: 'DELETE',\n                headers: {\n                    'Authorization': `Bearer ${token}`\n                }\n            });\n\n            if (!response.ok) {\n                const errorData = await response.json();\n                throw new Error(errorData.error || 'Failed response from server.');\n            }\n\n            console.log('Vibe deleted successfully!');\n            fetchUserVibes(); // Refresh user vibes\n\n            const vibeIds = updatedVibes.map(vibe => vibe._id);\n            localStorage.setItem('userVibes', JSON.stringify(vibeIds));\n        } catch (error) {\n            console.error('Error deleting vibe:', error);\n            // Revert the optimistic update in case of error\n            fetchUserVibes();\n        }\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        const token = user.token;\n\n        console.log('Selected Vibes:', selectedVibesToAdd);\n\n        // Optimistically update the UI\n        const newVibes = [...userVibes, ...selectedVibesToAdd.map(vibeId => ({ _id: vibeId }))];\n        setUserVibes(newVibes);\n        setSelectedVibesToAdd([]);\n\n        try {\n            const response = await fetch('/api/user/addVibes', {\n                method: 'PUT',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${token}`\n                },\n                body: JSON.stringify({ vibes: selectedVibesToAdd })\n            });\n\n            if (!response.ok) {\n                const errorData = await response.json();\n                throw new Error(errorData.error || 'Failed response from server.');\n            }\n\n            const updatedUser = await response.json();\n            console.log('Updated User:', updatedUser);\n\n            setUserVibes(updatedUser.vibes); // Update userVibes with the server response\n\n            console.log('Vibes added successfully!');\n\n            const vibeIds = updatedUser.vibes.map(vibe => vibe._id);\n            localStorage.setItem('userVibes', JSON.stringify(vibeIds));\n        } catch (error) {\n            console.error('Error adding vibes:', error);\n            // Revert the optimistic update in case of error\n            fetchUserVibes();\n        }\n    };\n\n    const knownUserVibes = useMemo(() => {\n        return userVibes.filter(vibe => availableVibes[vibe._id]);\n    }, [userVibes, availableVibes]);\n\n    if (loading) {\n        return <div>Loading...</div>;\n    }\n\n    return (\n        <div className=\"user-vibes-container\">\n            <h3>Current Vibes</h3>\n            <ul>\n                {knownUserVibes.map(vibe => (\n                    <li key={vibe._id}>\n                        {availableVibes[vibe._id]}\n                        <button onClick={() => handleDeleteVibe(vibe._id)}>Delete</button>\n                    </li>\n                ))}\n            </ul>\n\n            <form onSubmit={handleSubmit}>\n                <h3>Choose Vibes</h3>\n                <div className=\"available-vibes-container\">\n                    {Object.entries(availableVibes).map(([vibeId, vibeName]) => (\n                        <button\n                            key={vibeId}\n                            className={`vibe-button ${selectedVibesToAdd.includes(vibeId) ? 'selected' : ''}`}\n                            onClick={() => handleVibeSelection(vibeId)}\n                        >\n                            {vibeName}\n                        </button>\n                    ))}\n                </div>\n            </form>\n\n            <div>\n                <Link to=\"/\">Click here to check out your matching experiences!</Link>\n            </div>\n        </div>\n    );\n};\n\nexport default UserVibes;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}